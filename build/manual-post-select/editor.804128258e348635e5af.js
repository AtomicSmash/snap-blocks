(()=>{"use strict";var e={659:(e,t,l)=>{l.d(t,{m:()=>n});var r=l(668),i=l(172);function n(){(0,i.registerBlockCollection)("snap-blocks",{title:"Snap blocks",icon:r.o})}},668:(e,t,l)=>{l.d(t,{o:()=>i});var r=l(280);function i(e){return(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",xmlSpace:"preserve",...e},(0,r.createElement)("circle",{cx:2.9,cy:6,r:.6}),(0,r.createElement)("circle",{cx:16.8,cy:14.6,r:.6}),(0,r.createElement)("path",{d:"m4.9 14.2-2.1.1 1.1-1.8c-.1-.2-.2-.4-.2-.7l-2.6 1.4c.1.2.1.3.2.5l1.9-1L2 14.8h2.4L2.6 16c.1.1.2.3.4.4l2.5-1.6-.6-.6zm11-10.6-.6 2.1 2.2-.2-1.7 1.2c.1.3.2.4.3.6l2.4-1.8c-.1-.2-.2-.4-.3-.5l-2.2.2.6-2.1c-.1-.1-.3-.3-.5-.4l-2.1 2c.1.1.3.2.4.3l1.5-1.4zm.7 5.1 2.8-.7c0-.2-.1-.4-.1-.5l-2.8.7c0 .2 0 .4.1.5zM4 2.7l.7 3.5c.1-.3.3-.4.4-.6L5 4.8c.4-.4.9-.8 1.4-1.1l.6.4.6-.3-3.1-1.5c-.2.1-.3.2-.5.4zm1.8.8c-.3.3-.6.5-1 .8l-.2-1.4 1.2.6zm2.8-2.4c.5-.1.9-.2 1.3-.2V.4C8.8.4 7.7.7 6.7 1l.1.4c.4-.1.8-.3 1.3-.3l.5 2.4c.2 0 .4-.1.6-.1l-.6-2.3zM14.3 15l.7 1c-.5.4-1 .7-1.5 1l-.6-1c-.2.1-.3.2-.5.2l1.5 2.5c.2-.1.3-.2.5-.3l-.7-1.1c.5-.3 1.1-.6 1.6-1l.7 1.1c.2-.1.3-.2.4-.4l-1.7-2.4c-.1.2-.2.3-.4.4zm4-5.2c-.9-.2-1.6.3-1.8 1.4-.2.9.1 1.6.8 1.8.1-.2.1-.4.2-.5-.4-.1-.7-.5-.6-1.2.1-.8.6-1 1.2-.9.6.1 1 .5.8 1.3-.1.6-.4.9-.8.9-.1.2-.1.4-.2.6.7.1 1.3-.4 1.5-1.4.3-1.2-.2-1.9-1.1-2zM11 17.9c-.4-.1-1.1-.1-1.4-.2-.3-.1-.4-.1-.4-.3 0-.2.3-.4.8-.4.6 0 .9.2 1 .6.2 0 .4-.1.6-.1-.1-.6-.6-.9-1.5-.9s-1.4.3-1.4.9c0 .4.2.6.7.7.4.1 1 .1 1.4.2.3.1.4.1.4.3 0 .3-.3.4-1 .4-.6 0-1-.2-1.1-.5-.2 0-.4 0-.6-.1 0 .8.7 1.1 1.7 1.1.9 0 1.6-.3 1.6-.9-.2-.5-.4-.7-.8-.8zm-8.9-7.5c.1-.4.2-1.1.3-1.4.1-.3.2-.4.4-.4s.3.3.2.8c0 .6-.2 1-.6 1v.6c.6 0 1-.5 1-1.5.1-.9-.1-1.4-.7-1.5-.4 0-.6.2-.7.6-.2.4-.2 1.1-.3 1.4-.1.3-.2.4-.4.4-.3 0-.4-.4-.3-1 0-.6.2-1.1.6-1.1 0-.2.1-.4.1-.6-.8 0-1.1.6-1.2 1.6-.1 1 .2 1.7.8 1.7.5.1.7-.2.8-.6zm12-7.6c.3-.8 0-1.6-1.1-1.9-1.1-.3-1.8 0-2.1.9-.3.9.1 1.6 1.2 1.9 1.1.4 1.8 0 2-.9zm-1.9.5c-.8-.3-.9-.8-.8-1.3.2-.6.6-.9 1.4-.6.8.3.9.8.8 1.3-.2.5-.6.8-1.4.6zM6.7 15.7 4 17.4c.1.1.3.2.4.3l.7-.4c.4.3 1 .6 1.5.8v.8c.2.1.4.1.6.2V16c-.1-.1-.1-.1-.3-.1-.1-.2-.1-.2-.2-.2zM5.5 17l1.1-.7v1.3c-.3-.2-.8-.4-1.1-.6z"}))}},280:e=>{e.exports=window.React},172:e=>{e.exports=window.wp.blocks}},t={};function l(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,l),n.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=l(172),t=l(659);const r=JSON.parse('{"N9":"snap-blocks/manual-post-select"}');var i=l(280);const n=window.wp.blockEditor,s=window.wp.components,a=window.wp.compose,o=window.wp.coreData,c=window.wp.data,d=window.wp.element;function m(e){return!(null===e.listItemBeingDragged||null===e.draggedItemOriginalPosition)}function u({list:e,updateListCallback:t,containerClassName:l,itemClassName:r,...n}){(0,d.useEffect)((()=>{a({type:"update_list_from_props",newList:e})}),[e]);const[s,a]=(0,d.useReducer)((function(e,t){const l=e;let r;switch(t.type){case"start_being_dragged":r={listItemBeingDragged:t.itemId,draggedItemOriginalPosition:t.itemIndex,draggedItemFalseOrder:t.itemIndex+1,list:l.list};break;case"temporarily_rearrange_items":if(!m(l)){r=l;break}r={listItemBeingDragged:l.listItemBeingDragged,draggedItemOriginalPosition:l.draggedItemOriginalPosition,draggedItemFalseOrder:t.newOrder,list:l.list};break;case"end_being_dragged":{if(null===t.falseOrder)return l;const e=[];e[0]=null,l.list.forEach((t=>{e.push(t),e.push(null)}));const i=l.list.find((e=>e.id===l.listItemBeingDragged));if(!i)throw new Error("Failed to find moved item in list.");const n=e.indexOf(i);e[t.falseOrder+1]=i,n!==t.falseOrder+1&&(e[n]=null);const s=e.filter((e=>null!==e));r={listItemBeingDragged:null,draggedItemOriginalPosition:null,draggedItemFalseOrder:null,list:l.list},t.updateListCallback("update_list",s);break}case"remove_from_list":{r=l;const e=l.list.find((e=>e.id===t.itemId));if(!e)break;t.updateListCallback("remove",e);break}case"update_list_from_props":r={...l,list:t.newList}}return r}),{listItemBeingDragged:null,draggedItemOriginalPosition:null,draggedItemFalseOrder:null,list:e});return(0,i.createElement)("div",{...n,className:`draggable-list${m(s)?" is-dragging":""}${void 0!==l&&""!==l?` ${l}`:""}`},s.list.map(((e,l)=>{var n;return(0,i.createElement)("div",{key:e.id,className:`draggable-list-item${s.listItemBeingDragged===e.id?" being-dragged":""}${"string"==typeof r?` ${r}`:""}`,style:{order:s.listItemBeingDragged===e.id&&null!==(n=s.draggedItemFalseOrder)&&void 0!==n?n:2*l}},(0,i.createElement)("div",{className:"drag-zone-top",onDragOver:t=>{t.preventDefault(),s.listItemBeingDragged!==e.id&&a({type:"temporarily_rearrange_items",newOrder:2*l-1})}}),(0,i.createElement)("div",{className:"drag-handle",onDragStart:()=>setTimeout((()=>{a({type:"start_being_dragged",itemId:e.id,itemIndex:l})}),10),onDragEnd:()=>a({type:"end_being_dragged",falseOrder:s.draggedItemFalseOrder,updateListCallback:t}),draggable:!0},(0,i.createElement)("svg",{width:"9",height:"21",viewBox:"0 0 9 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("circle",{cx:"1.5",cy:"1.5",r:"1.5",fill:"currentColor"}),(0,i.createElement)("circle",{cx:"7.5",cy:"1.5",r:"1.5",fill:"currentColor"}),(0,i.createElement)("circle",{cx:"1.5",cy:"7.5",r:"1.5",fill:"currentColor"}),(0,i.createElement)("circle",{cx:"7.5",cy:"7.5",r:"1.5",fill:"currentColor"}),(0,i.createElement)("circle",{cx:"1.5",cy:"13.5",r:"1.5",fill:"currentColor"}),(0,i.createElement)("circle",{cx:"7.5",cy:"13.5",r:"1.5",fill:"currentColor"}),(0,i.createElement)("circle",{cx:"1.5",cy:"19.5",r:"1.5",fill:"currentColor"}),(0,i.createElement)("circle",{cx:"7.5",cy:"19.5",r:"1.5",fill:"currentColor"}))),(0,i.createElement)("div",{className:"draggable-list-item-content"},(0,i.createElement)(g,{iconString:e.icon}),(0,i.createElement)("span",{className:"draggable-list-item-text"},""===e.title?"(no title)":e.title),(0,i.createElement)("button",{className:"remove-button",onClick:()=>{a({type:"remove_from_list",itemId:e.id,updateListCallback:t})}},(0,i.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("path",{fill:"currentColor",d:"M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M11,10.3c0.2,0.2,0.2,0.5,0,0.7s-0.5,0.2-0.7,0L8,8.7 L5.7,11c-0.2,0.2-0.5,0.2-0.7,0s-0.2-0.5,0-0.7L7.3,8L5,5.7C4.8,5.5,4.8,5.2,5,5c0.2-0.2,0.5-0.2,0.7,0L8,7.3L10.3,5 c0.2-0.2,0.5-0.2,0.7,0s0.2,0.5,0,0.7L8.7,8L11,10.3z"})))),(0,i.createElement)("div",{className:"drag-zone-bottom",onDragOver:t=>{t.preventDefault(),s.listItemBeingDragged!==e.id&&a({type:"temporarily_rearrange_items",newOrder:2*l+1})}}))})))}function p({list:e,containerClassName:t,renderItem:l}){return(0,i.createElement)("section",{className:"custom-multiple-select-list"+(void 0!==t&&""!==t?` ${t}`:"")},e.map((e=>l({listItem:e,buttonProps:{type:"button",className:"custom-multiple-select-list-item"+(e.isSelected?" is-selected":"")}}))))}function g({iconString:e}){if("string"!=typeof e)return null;if("none"===e||"div"===e)return(0,i.createElement)("div",{className:"menu-icon","aria-hidden":"true"},(0,i.createElement)("br",null));if(0===e.indexOf("data:image/svg+xml;"))return(0,i.createElement)("div",{className:"menu-icon svg",style:{backgroundImage:`url('${e}')`},"aria-hidden":"true"},(0,i.createElement)("br",null));if(0===(t=e).indexOf("https://")||0===t.indexOf("http://"))return(0,i.createElement)("img",{src:new URL(e).toString(),alt:""});var t;if(function(e){return 0===e.indexOf("dashicons-")}(e)){const t=e.replace("dashicons-","");return(0,i.createElement)(s.Dashicon,{icon:t,className:"menu-icon"})}throw new Error("The icon string provided is not any of the valid formats.")}const f={attributes:{selectedPosts:{type:"array",source:"query",selector:"article.selected-post",query:{id:{type:"string",source:"attribute",attribute:"data-post-id"},title:{type:"string",source:"html",selector:"article.selected-post h3"},postType:{type:"string",source:"attribute",attribute:"data-post-type"}},default:[]}},supports:{},edit:function({attributes:e,setAttributes:t}){var l;const{selectedPosts:r}=e,m=(0,n.useBlockProps)(),{filteredPostTypes:f,mappedTaxonomies:y}=(()=>{const{postTypes:e,taxonomies:t}=(0,c.useSelect)((e=>{const{getEntityRecords:t}=e(o.store),l=["attachment"],r=t("root","postType",{per_page:-1})?.filter((({viewable:e,slug:t})=>e&&!l.includes(t)));if(!r||0===r.length)return{postTypes:r,taxonomies:void 0};const i={},n=[];for(const e of r){const l=t("root","taxonomy",{per_page:-1,orderby:"name"})?.filter((({types:t,slug:l})=>t.includes(e.slug)&&!n.includes(l)));l&&(i[e.slug]=l.map((e=>{const l=t("taxonomy",e.slug);return{...e,terms:l}})))}return{postTypes:r,taxonomies:i}}),[]);return{filteredPostTypes:e,mappedTaxonomies:t}})(),[v,h]=(0,d.useState)(""),[w,b]=(0,d.useState)(["any"]),[E,x]=(0,d.useState)([]),I=(0,c.useSelect)((e=>{const t={};if(f)for(const r of f){var l;t[r.slug]=null!==(l=e(o.store).getEntityRecords("postType",r.slug,{per_page:-1,context:"view",search:v,...E.reduce(((e,t)=>{const[l,r]=t.split("__");return void 0===e[l]&&(e[l]=[]),e[l].push(r),e}),{})}))&&void 0!==l?l:[]}return t}),[f,v,E]);function k(e,l){if("add"===e){if(Array.isArray(l))throw new Error(`You can't pass an array if your type is ${e}`);t({selectedPosts:[...r,l]})}if("remove"===e){if(Array.isArray(l))throw new Error(`You can't pass an array if your type is ${e}`);t({selectedPosts:r.filter((e=>e.id!==l.id))})}if("update_list"===e){if(!Array.isArray(l))throw new Error(`You must pass an array if your type is ${e}`);t({selectedPosts:l})}}return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(n.InspectorControls,null,(0,i.createElement)(s.Panel,null,(0,i.createElement)(s.PanelBody,{title:"Select posts"},void 0!==f?(0,i.createElement)(s.BaseControl,{label:"Post Type",id:"custom-multiple-select-list-post-types"},(0,i.createElement)(p,{list:[{id:"any",title:"Show all",isSelected:w.includes("any"),icon:"dashicons-image-filter"},...f.map((e=>({id:e.slug,title:e.name,isSelected:w.includes(e.slug),icon:e.icon})))],renderItem:({listItem:e,buttonProps:t})=>(0,i.createElement)("button",{key:e.id,...t,onClick:t=>{t.preventDefault(),"any"===e.id?b(["any"]):w.includes(e.id)?0===w.filter((t=>t!==e.id)).length?b(["any"]):b(w.filter((t=>t!==e.id))):b([...w,e.id].filter((e=>"any"!==e)))}},(0,i.createElement)(g,{iconString:e.icon}),(0,i.createElement)("span",{className:"custom-multiple-select-list-item-label"},e.title),e.isSelected?(0,i.createElement)("svg",{width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"presentation"},(0,i.createElement)("path",{d:"M1 5L5 9L13 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})):null)})):null,y?w.map((e=>y[e]?.map((e=>e.terms&&0!==e.terms.length?(0,i.createElement)(s.BaseControl,{key:e.slug,id:`${e.slug}-custom-multiple-select-list`,label:e.name},(0,i.createElement)(p,{list:e.terms.map((t=>{const l=`${e.slug}__${t.slug}`;return{id:l,title:t.name,isSelected:E.includes(l)}})),renderItem:({listItem:e,buttonProps:t})=>(0,i.createElement)("button",{key:e.id,...t,onClick:t=>{t.preventDefault(),e.isSelected?x(E.filter((t=>t!==e.id))):x([...E,e.id])}},(0,i.createElement)("span",{className:"custom-multiple-select-list-item-label"},""===e.title?"(no title)":e.title),e.isSelected?(0,i.createElement)("svg",{width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"presentation"},(0,i.createElement)("path",{d:"M1 5L5 9L13 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})):null)})):null)))):null,(0,i.createElement)(s.SearchControl,{label:"Search",hideLabelFromVision:!1,help:"Type your search term in the box above",value:v,onChange:h}),(0,i.createElement)(s.BaseControl,{id:(0,a.useInstanceId)(s.BaseControl,"custom-multiple-select-list-id-"),label:"Search results"},(0,i.createElement)(p,{list:null!==(l=(w.includes("any")?Object.values(I):w.map((e=>I[e]))).flat(1).sort(((e,t)=>{if(null===e.date||null===t.date)throw new Error("Error getting the published date.");const l=new Date(e.date).getTime(),r=new Date(t.date).getTime();return l<r?-1:l>r?1:0})).map((e=>{var t;return{id:`${e.id}`,title:e.title.rendered,postType:e.type,icon:f?.find((t=>t.slug===e.type))?.icon,itemLabel:null!==(t=f?.find((t=>t.slug===e.type))?.labels.singular_name)&&void 0!==t?t:void 0,isSelected:!!r.find((t=>`${e.id}`===t.id&&e.title.rendered===t.title))}})))&&void 0!==l?l:[],renderItem:({listItem:e,buttonProps:t})=>e.isSelected?null:(0,i.createElement)("button",{...t,key:e.id,onClick:()=>{k("add",e)}},(0,i.createElement)(g,{iconString:e.icon}),(0,i.createElement)("span",{className:"custom-multiple-select-list-item-label"},""===e.title?"(no title)":e.title))})),(0,i.createElement)(s.BaseControl,{id:(0,a.useInstanceId)(s.BaseControl,"draggable-list-id-"),label:"Selected posts",help:r.length>0?"You can drag and drop the posts above to change the order that they appear in.":"Use the filters above to select the posts you would like to show in this block."},(0,i.createElement)(u,{list:r.map((e=>{var t;return{...e,icon:null!==(t=f?.find((t=>t.slug===e.postType))?.icon)&&void 0!==t?t:void 0}})),updateListCallback:k}))))),(0,i.createElement)("div",{...m},r.length>0?r.map((e=>(0,i.createElement)("article",{className:"selected-post",key:e.id,"data-post-id":e.id,"data-post-type":e.postType},(0,i.createElement)("h3",null,""===e.title?"(no title)":e.title)))):(0,i.createElement)("div",null,"Pick your posts to show in the sidebar.")))},save:function({attributes:e}){const{selectedPosts:t}=e,l=n.useBlockProps.save();return(0,i.createElement)("div",{...l},t.map((e=>(0,i.createElement)("article",{className:"selected-post",key:e.id,"data-post-id":e.id,"data-post-type":e.postType},(0,i.createElement)("h3",null,e.title)))))}};var y,v;y=r.N9,v={...f},(0,e.registerBlockType)(y,v),(0,t.m)()})()})();